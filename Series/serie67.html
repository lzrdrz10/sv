<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>El increíble mundo de Gumball</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    .scrollbar-hide::-webkit-scrollbar { display: none; }
    .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
    body, html { margin: 0; padding: 0; height: 100%; font-family: "Poppins", sans-serif; }
    body::before {
      content: "";
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-image: url('https://image.tmdb.org/t/p/original/3PCVo8Wikg4wG6dqZHs4Ofp0laA.jpg');
      background-size: cover;
      background-position: center;
      z-index: -2;
    }
    body::after {
      content: "";
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.85);
      z-index: -1;
    }
    #iframe-principal { width: 100%; height: 220px; border: none; background: black; }
    #contenedor-video { position: fixed; top: 0; left: 0; width: 100%; z-index: 10; }
    .capitulo-seleccionado { background-color: #FF0000 !important; color: #fff !important; font-weight: bold; }
    .server-btn { display: none; }
    .server-seleccionado { background-color: #FF7F00 !important; color: #fff !important; }
    .error-message { display: none; color: #FF4444; font-size: 0.875rem; text-align: center; margin-top: 1rem; }
  </style>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-PC9JETB0VP"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-PC9JETB0VP');
  </script>
  <script disable-devtool-auto src='https://cdn.jsdelivr.net/npm/disable-devtool@latest'></script>
  <script src="../access.js"></script>
</head>
<body class="text-white font-sans leading-relaxed">
  <div id="contenedor-video" class="relative">
    <iframe id="iframe-principal" allow="fullscreen" allowfullscreen></iframe>
    <a href="../index.html" aria-label="Volver" class="absolute top-3 left-3 text-white text-2xl z-20">
      <i class="fas fa-arrow-left"></i>
    </a>
    <div class="absolute top-0 left-0 w-full h-full z-10" style="pointer-events: none;"></div>
  </div>
  <div class="max-w-4xl mx-auto px-4 pt-60 pb-24 space-y-4">
    <div class="flex space-x-4 bg-[#1a1a1a] p-4 rounded-md items-center">
      <div class="flex items-center justify-center w-[110px] h-[160px] flex-shrink-0">
        <img alt="El increíble mundo de Gumball" class="rounded-lg w-full h-full object-cover" src="https://image.tmdb.org/t/p/original/al3wD1MqEfwifOBBFnBM5uOl9OT.jpg" loading="lazy" />
      </div>
      <div class="flex-1">
        <h1 class="text-xl sm:text-2xl font-bold">El increíble mundo de Gumball T<span id="temp-titulo">1</span></h1>
        <p class="text-gray-300 italic text-sm">Publicado por: Lz-1</p>
        <div class="flex flex-wrap items-center gap-3 text-sm text-gray-400 mt-1">
          <span><strong class="text-[#FF7F00]">8.5</strong> / 10</span>
          <span class="text-white">•</span>
          <span>Animación, Familia, Sci-Fi & Fantasy, Comedia</span>
          <span class="text-white">•</span>
          <span>2011</span>
        </div>
        <div class="flex items-center mt-3 space-x-3">
          <div id="rating-value" class="bg-[#2a2a2a] rounded-md px-3 py-1 text-lg font-semibold text-white">8.5</div>
          <div id="star-container" class="flex space-x-1 text-yellow-400 text-lg"></div>
        </div>
      </div>
    </div>
    <div class="flex items-center gap-3">
      <label for="temporada" class="text-sm text-gray-300">Temporada:</label>
      <select id="temporada" class="bg-[#1f1f1f] text-white px-3 py-1 rounded text-sm">
        <option value="1">Temporada 1</option><option value="2">Temporada 2</option><option value="3">Temporada 3</option><option value="4">Temporada 4</option><option value="5">Temporada 5</option><option value="6">Temporada 6</option><option value="7">Temporada 7</option>
      </select>
    </div>
    <div class="flex space-x-2 overflow-x-auto scrollbar-hide pb-1" id="lista-capitulos"></div>
    <div id="servidores" class="flex space-x-2">
      <button id="server1-btn" class="server-btn px-3 py-1 rounded bg-[#2a2a2a] text-white text-sm">Servidor 1</button>
      <button id="server2-btn" class="server-btn px-3 py-1 rounded bg-[#2a2a2a] text-white text-sm">Servidor 2</button>
      <button id="server3-btn" class="server-btn px-3 py-1 rounded bg-[#2a2a2a] text-white text-sm">Servidor 3</button>
    </div>
    <div id="error-message" class="error-message">No hay enlaces disponibles para este episodio.</div>
    <div class="bg-[#1e1e1e] rounded-lg p-4 text-sm text-gray-300 leading-relaxed">
      <p><span class="font-semibold text-white">Sinopsis:</span> La serie gira en torno a la vida de un gato azul llamado Gumball Watterson y sus frecuentes travesuras en la ficticia ciudad estadounidense de Elmore, acompañado por su hermano adoptivo y mejor amigo, Darwin. Otros miembros de la familia Watterson son: una conejita rosada e intelectual hermana menor, Anaís; un conejo holgazán como su padre, Richard; y su madre Nicole, una gata, quienes a menudo se ven involucrados en las aventuras de Gumball. Gumball y sus hermanos asisten a la escuela "Elmore Junior School" (Escuela primaria de Elmore), donde, a lo largo de la serie, interactúan con sus varios compañeros, principalmente con el interés amoroso de Gumball, Penny.</p>
    </div>
  </div>
  <nav class="fixed bottom-0 left-0 w-full bg-[#1E1E1E] flex justify-around items-center py-3 rounded-b-3xl text-white text-xs font-semibold z-50">
    <a href="../index.html" class="flex flex-col items-center space-y-1">
      <i class="fas fa-arrow-left text-xl"></i>
      <span>Regresar</span>
    </a>
    <a href="../Categorias/movie/index.html" class="flex flex-col items-center space-y-1">
      <i class="fas fa-film text-xl"></i>
      <span>Movies</span>
    </a>
    <a href="../Categorias/serie/index.html" class="flex flex-col items-center space-y-1">
      <i class="fas fa-tv text-xl"></i>
      <span>Series</span>
    </a>
    <a href="../SEARCH/index.html" class="flex flex-col items-center space-y-1">
      <i class="fas fa-search text-xl"></i>
      <span>Buscar</span>
    </a>
  </nav>
  <script>
    var videosPorCapitulo = {"1":{"1":{"url1":"","url2":"","url3":""},"2":{"url1":"","url2":"","url3":""},"3":{"url1":"","url2":"","url3":""},"4":{"url1":"","url2":"","url3":""},"5":{"url1":"","url2":"","url3":""},"6":{"url1":"","url2":"","url3":""},"7":{"url1":"","url2":"","url3":""},"8":{"url1":"","url2":"","url3":""},"9":{"url1":"","url2":"","url3":""},"10":{"url1":"","url2":"","url3":""},"11":{"url1":"","url2":"","url3":""},"12":{"url1":"","url2":"","url3":""},"13":{"url1":"","url2":"","url3":""},"14":{"url1":"","url2":"","url3":""},"15":{"url1":"","url2":"","url3":""},"16":{"url1":"","url2":"","url3":""},"17":{"url1":"","url2":"","url3":""},"18":{"url1":"","url2":"","url3":""},"19":{"url1":"","url2":"","url3":""},"20":{"url1":"","url2":"","url3":""},"21":{"url1":"","url2":"","url3":""},"22":{"url1":"","url2":"","url3":""},"23":{"url1":"","url2":"","url3":""},"24":{"url1":"","url2":"","url3":""},"25":{"url1":"","url2":"","url3":""},"26":{"url1":"","url2":"","url3":""},"27":{"url1":"","url2":"","url3":""},"28":{"url1":"","url2":"","url3":""},"29":{"url1":"","url2":"","url3":""},"30":{"url1":"","url2":"","url3":""},"31":{"url1":"","url2":"","url3":""},"32":{"url1":"","url2":"","url3":""},"33":{"url1":"","url2":"","url3":""},"34":{"url1":"","url2":"","url3":""},"35":{"url1":"","url2":"","url3":""},"36":{"url1":"","url2":"","url3":""}},"2":{"1":{"url1":"","url2":"","url3":""},"2":{"url1":"","url2":"","url3":""},"3":{"url1":"","url2":"","url3":""},"4":{"url1":"","url2":"","url3":""},"5":{"url1":"","url2":"","url3":""},"6":{"url1":"","url2":"","url3":""},"7":{"url1":"","url2":"","url3":""},"8":{"url1":"","url2":"","url3":""},"9":{"url1":"","url2":"","url3":""},"10":{"url1":"","url2":"","url3":""},"11":{"url1":"","url2":"","url3":""},"12":{"url1":"","url2":"","url3":""},"13":{"url1":"","url2":"","url3":""},"14":{"url1":"","url2":"","url3":""},"15":{"url1":"","url2":"","url3":""},"16":{"url1":"","url2":"","url3":""},"17":{"url1":"","url2":"","url3":""},"18":{"url1":"","url2":"","url3":""},"19":{"url1":"","url2":"","url3":""},"20":{"url1":"","url2":"","url3":""},"21":{"url1":"","url2":"","url3":""},"22":{"url1":"","url2":"","url3":""},"23":{"url1":"","url2":"","url3":""},"24":{"url1":"","url2":"","url3":""},"25":{"url1":"","url2":"","url3":""},"26":{"url1":"","url2":"","url3":""},"27":{"url1":"","url2":"","url3":""},"28":{"url1":"","url2":"","url3":""},"29":{"url1":"","url2":"","url3":""},"30":{"url1":"","url2":"","url3":""},"31":{"url1":"","url2":"","url3":""},"32":{"url1":"","url2":"","url3":""},"33":{"url1":"","url2":"","url3":""},"34":{"url1":"","url2":"","url3":""},"35":{"url1":"","url2":"","url3":""},"36":{"url1":"","url2":"","url3":""},"37":{"url1":"","url2":"","url3":""},"38":{"url1":"","url2":"","url3":""},"39":{"url1":"","url2":"","url3":""},"40":{"url1":"","url2":"","url3":""}},"3":{"1":{"url1":"","url2":"","url3":""},"2":{"url1":"","url2":"","url3":""},"3":{"url1":"","url2":"","url3":""},"4":{"url1":"","url2":"","url3":""},"5":{"url1":"","url2":"","url3":""},"6":{"url1":"","url2":"","url3":""},"7":{"url1":"","url2":"","url3":""},"8":{"url1":"","url2":"","url3":""},"9":{"url1":"","url2":"","url3":""},"10":{"url1":"","url2":"","url3":""},"11":{"url1":"","url2":"","url3":""},"12":{"url1":"","url2":"","url3":""},"13":{"url1":"","url2":"","url3":""},"14":{"url1":"","url2":"","url3":""},"15":{"url1":"","url2":"","url3":""},"16":{"url1":"","url2":"","url3":""},"17":{"url1":"","url2":"","url3":""},"18":{"url1":"","url2":"","url3":""},"19":{"url1":"","url2":"","url3":""},"20":{"url1":"","url2":"","url3":""},"21":{"url1":"","url2":"","url3":""},"22":{"url1":"","url2":"","url3":""},"23":{"url1":"","url2":"","url3":""},"24":{"url1":"","url2":"","url3":""},"25":{"url1":"","url2":"","url3":""},"26":{"url1":"","url2":"","url3":""},"27":{"url1":"","url2":"","url3":""},"28":{"url1":"","url2":"","url3":""},"29":{"url1":"","url2":"","url3":""},"30":{"url1":"","url2":"","url3":""},"31":{"url1":"","url2":"","url3":""},"32":{"url1":"","url2":"","url3":""},"33":{"url1":"","url2":"","url3":""},"34":{"url1":"","url2":"","url3":""},"35":{"url1":"","url2":"","url3":""},"36":{"url1":"","url2":"","url3":""},"37":{"url1":"","url2":"","url3":""},"38":{"url1":"","url2":"","url3":""},"39":{"url1":"","url2":"","url3":""},"40":{"url1":"","url2":"","url3":""}},"4":{"1":{"url1":"","url2":"","url3":""},"2":{"url1":"","url2":"","url3":""},"3":{"url1":"","url2":"","url3":""},"4":{"url1":"","url2":"","url3":""},"5":{"url1":"","url2":"","url3":""},"6":{"url1":"","url2":"","url3":""},"7":{"url1":"","url2":"","url3":""},"8":{"url1":"","url2":"","url3":""},"9":{"url1":"","url2":"","url3":""},"10":{"url1":"","url2":"","url3":""},"11":{"url1":"","url2":"","url3":""},"12":{"url1":"","url2":"","url3":""},"13":{"url1":"","url2":"","url3":""},"14":{"url1":"","url2":"","url3":""},"15":{"url1":"","url2":"","url3":""},"16":{"url1":"","url2":"","url3":""},"17":{"url1":"","url2":"","url3":""},"18":{"url1":"","url2":"","url3":""},"19":{"url1":"","url2":"","url3":""},"20":{"url1":"","url2":"","url3":""},"21":{"url1":"","url2":"","url3":""},"22":{"url1":"","url2":"","url3":""},"23":{"url1":"","url2":"","url3":""},"24":{"url1":"","url2":"","url3":""},"25":{"url1":"","url2":"","url3":""},"26":{"url1":"","url2":"","url3":""},"27":{"url1":"","url2":"","url3":""},"28":{"url1":"","url2":"","url3":""},"29":{"url1":"","url2":"","url3":""},"30":{"url1":"","url2":"","url3":""},"31":{"url1":"","url2":"","url3":""},"32":{"url1":"","url2":"","url3":""},"33":{"url1":"","url2":"","url3":""},"34":{"url1":"","url2":"","url3":""},"35":{"url1":"","url2":"","url3":""},"36":{"url1":"","url2":"","url3":""},"37":{"url1":"","url2":"","url3":""},"38":{"url1":"","url2":"","url3":""},"39":{"url1":"","url2":"","url3":""},"40":{"url1":"","url2":"","url3":""}},"5":{"1":{"url1":"","url2":"","url3":""},"2":{"url1":"","url2":"","url3":""},"3":{"url1":"","url2":"","url3":""},"4":{"url1":"","url2":"","url3":""},"5":{"url1":"","url2":"","url3":""},"6":{"url1":"","url2":"","url3":""},"7":{"url1":"","url2":"","url3":""},"8":{"url1":"","url2":"","url3":""},"9":{"url1":"","url2":"","url3":""},"10":{"url1":"","url2":"","url3":""},"11":{"url1":"","url2":"","url3":""},"12":{"url1":"","url2":"","url3":""},"13":{"url1":"","url2":"","url3":""},"14":{"url1":"","url2":"","url3":""},"15":{"url1":"","url2":"","url3":""},"16":{"url1":"","url2":"","url3":""},"17":{"url1":"","url2":"","url3":""},"18":{"url1":"","url2":"","url3":""},"19":{"url1":"","url2":"","url3":""},"20":{"url1":"","url2":"","url3":""},"21":{"url1":"","url2":"","url3":""},"22":{"url1":"","url2":"","url3":""},"23":{"url1":"","url2":"","url3":""},"24":{"url1":"","url2":"","url3":""},"25":{"url1":"","url2":"","url3":""},"26":{"url1":"","url2":"","url3":""},"27":{"url1":"","url2":"","url3":""},"28":{"url1":"","url2":"","url3":""},"29":{"url1":"","url2":"","url3":""},"30":{"url1":"","url2":"","url3":""},"31":{"url1":"","url2":"","url3":""},"32":{"url1":"","url2":"","url3":""},"33":{"url1":"","url2":"","url3":""},"34":{"url1":"","url2":"","url3":""},"35":{"url1":"","url2":"","url3":""},"36":{"url1":"","url2":"","url3":""},"37":{"url1":"","url2":"","url3":""},"38":{"url1":"","url2":"","url3":""},"39":{"url1":"","url2":"","url3":""},"40":{"url1":"","url2":"","url3":""}},"6":{"1":{"url1":"","url2":"","url3":""},"2":{"url1":"","url2":"","url3":""},"3":{"url1":"","url2":"","url3":""},"4":{"url1":"","url2":"","url3":""},"5":{"url1":"","url2":"","url3":""},"6":{"url1":"","url2":"","url3":""},"7":{"url1":"","url2":"","url3":""},"8":{"url1":"","url2":"","url3":""},"9":{"url1":"","url2":"","url3":""},"10":{"url1":"","url2":"","url3":""},"11":{"url1":"","url2":"","url3":""},"12":{"url1":"","url2":"","url3":""},"13":{"url1":"","url2":"","url3":""},"14":{"url1":"","url2":"","url3":""},"15":{"url1":"","url2":"","url3":""},"16":{"url1":"","url2":"","url3":""},"17":{"url1":"","url2":"","url3":""},"18":{"url1":"","url2":"","url3":""},"19":{"url1":"","url2":"","url3":""},"20":{"url1":"","url2":"","url3":""},"21":{"url1":"","url2":"","url3":""},"22":{"url1":"","url2":"","url3":""},"23":{"url1":"","url2":"","url3":""},"24":{"url1":"","url2":"","url3":""},"25":{"url1":"","url2":"","url3":""},"26":{"url1":"","url2":"","url3":""},"27":{"url1":"","url2":"","url3":""},"28":{"url1":"","url2":"","url3":""},"29":{"url1":"","url2":"","url3":""},"30":{"url1":"","url2":"","url3":""},"31":{"url1":"","url2":"","url3":""},"32":{"url1":"","url2":"","url3":""},"33":{"url1":"","url2":"","url3":""},"34":{"url1":"","url2":"","url3":""},"35":{"url1":"","url2":"","url3":""},"36":{"url1":"","url2":"","url3":""},"37":{"url1":"","url2":"","url3":""},"38":{"url1":"","url2":"","url3":""},"39":{"url1":"","url2":"","url3":""},"40":{"url1":"","url2":"","url3":""},"41":{"url1":"","url2":"","url3":""},"42":{"url1":"","url2":"","url3":""},"43":{"url1":"","url2":"","url3":""},"44":{"url1":"","url2":"","url3":""}},"7":{"1":{"url1":"","url2":"","url3":""},"2":{"url1":"","url2":"","url3":""},"3":{"url1":"","url2":"","url3":""},"4":{"url1":"","url2":"","url3":""},"5":{"url1":"","url2":"","url3":""},"6":{"url1":"","url2":"","url3":""},"7":{"url1":"","url2":"","url3":""},"8":{"url1":"","url2":"","url3":""},"9":{"url1":"","url2":"","url3":""},"10":{"url1":"","url2":"","url3":""},"11":{"url1":"","url2":"","url3":""},"12":{"url1":"","url2":"","url3":""},"13":{"url1":"","url2":"","url3":""},"14":{"url1":"","url2":"","url3":""},"15":{"url1":"","url2":"","url3":""},"16":{"url1":"","url2":"","url3":""},"17":{"url1":"","url2":"","url3":""},"18":{"url1":"","url2":"","url3":""},"19":{"url1":"","url2":"","url3":""},"20":{"url1":"","url2":"","url3":""},"21":{"url1":"","url2":"","url3":""},"22":{"url1":"","url2":"","url3":""},"23":{"url1":"","url2":"","url3":""},"24":{"url1":"","url2":"","url3":""},"25":{"url1":"","url2":"","url3":""},"26":{"url1":"","url2":"","url3":""},"27":{"url1":"","url2":"","url3":""},"28":{"url1":"","url2":"","url3":""},"29":{"url1":"","url2":"","url3":""},"30":{"url1":"","url2":"","url3":""},"31":{"url1":"","url2":"","url3":""},"32":{"url1":"","url2":"","url3":""},"33":{"url1":"","url2":"","url3":""},"34":{"url1":"","url2":"","url3":""},"35":{"url1":"","url2":"","url3":""},"36":{"url1":"","url2":"","url3":""},"37":{"url1":"","url2":"","url3":""},"38":{"url1":"","url2":"","url3":""},"39":{"url1":"","url2":"","url3":""},"40":{"url1":"","url2":"","url3":""}}};
    var serieId = "37606";
    var temporadaSelect = document.getElementById('temporada');
    var listaCapitulos = document.getElementById('lista-capitulos');
    var tempTitulo = document.getElementById('temp-titulo');
    var iframePrincipal = document.getElementById('iframe-principal');
    var server1Btn = document.getElementById('server1-btn');
    var server2Btn = document.getElementById('server2-btn');
    var server3Btn = document.getElementById('server3-btn');
    var errorMessage = document.getElementById('error-message');

    var serieActual = {
      id: serieId,
      titulo: "El increíble mundo de Gumball",
      temporada: temporadaSelect.value,
      poster: "https://image.tmdb.org/t/p/original/al3wD1MqEfwifOBBFnBM5uOl9OT.jpg",
      currentServer: localStorage.getItem("servidorSeleccionado_" + serieId) || "url1"
    };

    var rating = 8.5;
    var starContainer = document.getElementById('star-container');
    var fullStars = Math.floor(rating / 2);
    var halfStar = rating % 2 >= 1;
    for (var i = 0; i < 5; i++) {
      var star = document.createElement('i');
      if (i < fullStars) star.className = 'fas fa-star text-yellow-400';
      else if (i === fullStars && halfStar) star.className = 'fas fa-star-half-alt text-yellow-400';
      else star.className = 'fas fa-star text-gray-400';
      starContainer.appendChild(star);
    }

    function guardarTemporada(temporada) {
      localStorage.setItem("temporadaSeleccionada_" + serieId, temporada);
    }

    function cargarTemporadaGuardada() {
      return localStorage.getItem("temporadaSeleccionada_" + serieId) || "1";
    }

    function guardarCapitulo(capitulo) {
      localStorage.setItem("ultimoCapituloVisto_" + serieId + "_T" + serieActual.temporada, capitulo);
    }

    function guardarServidor(servidor) {
      localStorage.setItem("servidorSeleccionado_" + serieId, servidor);
    }

    function cargarCapituloGuardado() {
      var key = "ultimoCapituloVisto_" + serieId + "_T" + serieActual.temporada;
      var capituloGuardado = localStorage.getItem(key);
      var botones = listaCapitulos.getElementsByClassName('capitulo-btn');
      var encontrado = false;

      for (var i = 0; i < botones.length; i++) {
        botones[i].className = botones[i].className.replace(' capitulo-seleccionado', '');
        if (botones[i].getAttribute('data-capitulo') === capituloGuardado) {
          botones[i].className += ' capitulo-seleccionado';
          botones[i].scrollIntoView({ behavior: 'smooth', inline: 'center' });
          cambiarVideo(capituloGuardado);
          encontrado = true;
        }
      }
      if (!encontrado) {
        cambiarVideo("1");
      }
    }

    function cambiarVideo(capitulo) {
      var temp = serieActual.temporada;
      var data = videosPorCapitulo[temp] && videosPorCapitulo[temp][capitulo];
      errorMessage.style.display = 'none';
      if (data && data[serieActual.currentServer] && data[serieActual.currentServer].trim() !== '') {
        iframePrincipal.src = data[serieActual.currentServer];
        guardarCapitulo(capitulo);
        guardarServidor(serieActual.currentServer);
        server1Btn.style.display = data.url1 && data.url1.trim() !== '' ? 'inline-block' : 'none';
        server2Btn.style.display = data.url2 && data.url2.trim() !== '' ? 'inline-block' : 'none';
        server3Btn.style.display = data.url3 && data.url3.trim() !== '' ? 'inline-block' : 'none';
        server1Btn.className = server1Btn.className.replace(' server-seleccionado', '');
        server2Btn.className = server2Btn.className.replace(' server-seleccionado', '');
        server3Btn.className = server3Btn.className.replace(' server-seleccionado', '');
        if (serieActual.currentServer === "url1") server1Btn.className += ' server-seleccionado';
        else if (serieActual.currentServer === "url2") server2Btn.className += ' server-seleccionado';
        else if (serieActual.currentServer === "url3") server3Btn.className += ' server-seleccionado';
      } else {
        iframePrincipal.src = '';
        errorMessage.style.display = 'block';
        server1Btn.style.display = 'none';
        server2Btn.style.display = 'none';
        server3Btn.style.display = 'none';
      }
    }

    function generarCapitulos(temporada) {
      listaCapitulos.innerHTML = '';
      var capitulosObj = videosPorCapitulo[temporada] || {};
      var total = Object.keys(capitulosObj).length;

      for (var i = 1; i <= total; i++) {
        var btn = document.createElement('button');
        btn.className = 'capitulo-btn px-4 py-2 rounded bg-[#2a2a2a] text-white';
        btn.setAttribute('data-capitulo', i.toString());
        btn.textContent = i;
        listaCapitulos.appendChild(btn);
      }
      agregarEventosCapitulos();
      cargarCapituloGuardado();
    }

    function agregarEventosCapitulos() {
      var botones = listaCapitulos.getElementsByClassName('capitulo-btn');
      for (var i = 0; i < botones.length; i++) {
        (function(index) {
          botones[index].onclick = function() {
            for (var j = 0; j < botones.length; j++) {
              botones[j].className = botones[j].className.replace(' capitulo-seleccionado', '');
            }
            botones[index].className += ' capitulo-seleccionado';
            botones[index].scrollIntoView({ behavior: 'smooth', inline: 'center' });
            serieActual.currentServer = localStorage.getItem("servidorSeleccionado_" + serieId) || "url1";
            cambiarVideo(botones[index].getAttribute('data-capitulo'));
          };
        })(i);
      }
    }

    server1Btn.onclick = function() {
      serieActual.currentServer = "url1";
      var seleccionado = listaCapitulos.querySelector('.capitulo-seleccionado');
      if (seleccionado) cambiarVideo(seleccionado.getAttribute('data-capitulo'));
    };

    server2Btn.onclick = function() {
      serieActual.currentServer = "url2";
      var seleccionado = listaCapitulos.querySelector('.capitulo-seleccionado');
      if (seleccionado) cambiarVideo(seleccionado.getAttribute('data-capitulo'));
    };

    server3Btn.onclick = function() {
      serieActual.currentServer = "url3";
      var seleccionado = listaCapitulos.querySelector('.capitulo-seleccionado');
      if (seleccionado) cambiarVideo(seleccionado.getAttribute('data-capitulo'));
    };

    temporadaSelect.onchange = function() {
      var temp = temporadaSelect.value;
      serieActual.temporada = temp;
      tempTitulo.textContent = temp;
      guardarTemporada(temp);
      server1Btn.style.display = 'none';
      server2Btn.style.display = 'none';
      server3Btn.style.display = 'none';
      errorMessage.style.display = 'none';
      generarCapitulos(temp);
    };

    window.onload = function() {
      var tempGuardada = cargarTemporadaGuardada();
      temporadaSelect.value = tempGuardada;
      serieActual.temporada = tempGuardada;
      tempTitulo.textContent = tempGuardada;
      generarCapitulos(tempGuardada);
    };
  </script>
</body>
</html>