<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Los Caballeros del Zodiaco: El Lienzo Perdido</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet" />
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" />
<style>
.scrollbar-hide::-webkit-scrollbar { display: none; }
.scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
body, html { margin: 0; padding: 0; height: 100%; font-family: "Poppins", sans-serif; }
body::before {
  content: "";
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background-image: url('https://image.tmdb.org/t/p/w1280/gtHBhTeN7IBq0bba2QpWa7Hln8m.jpg');
  background-size: cover;
  background-position: center;
  z-index: -2;
}
body::after {
  content: "";
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0, 0, 0, 0.75);
  z-index: -1;
}
#iframe-principal { width: 100%; height: 220px; border: none; background: black; }
#contenedor-video { position: fixed; top: 0; left: 0; width: 100%; z-index: 10; }
.capitulo-seleccionado { background-color: #FF0000 !important; color: #fff !important; font-weight: bold; border-bottom: none !important; }
.server-btn { display: none; }
.server-seleccionado { background-color: #FF7F00 !important; color: #fff !important; }
.error-message { display: none; color: #FF4444; font-size: 0.875rem; text-align: center; margin-top: 1rem; }
</style>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PC9JETB0VP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-PC9JETB0VP');
</script>
<script disable-devtool-auto src='https://cdn.jsdelivr.net/npm/disable-devtool@latest'></script>
<script src="../access.js"></script>
</head>
<body class="text-white font-sans leading-relaxed">
<div id="contenedor-video" class="relative">
  <iframe id="iframe-principal" allow="fullscreen" allowfullscreen></iframe>
  <a href="https://lzrdrz10.github.io/sv/" aria-label="Volver" class="absolute top-3 left-3 text-white text-2xl z-20">
    <i class="fas fa-arrow-left"></i>
  </a>
  <div class="absolute top-0 left-0 w-full h-full z-10" style="pointer-events: none;"></div>
</div>
<div class="px-4 pt-60 pb-4 space-y-4">
  <div class="flex items-center justify-between">
    <h1 class="text-xl sm:text-2xl font-bold">Los Caballeros del Zodiaco: El Lienzo Perdido T<span id="temp-titulo">1</span></h1>
  </div>
  <div class="flex flex-wrap items-center gap-3 text-sm text-gray-400">
    <span><strong class="text-[#FF7F00]">8.3</strong> / 10</span>
    <span class="text-white">•</span>
    <span>Animación, Action & Adventure, Drama</span>
    <span class="text-white">•</span>
    <span>2009</span>
  </div>
  <div class="flex items-center gap-3">
    <label for="temporada" class="text-sm text-gray-300">Temporada:</label>
    <select id="temporada" class="bg-[#1f1f1f] text-white px-3 py-1 rounded text-sm">
      <option value="1">Temporada 1</option>
    </select>
  </div>
  <div class="flex space-x-2 overflow-x-auto scrollbar-hide pb-1" id="lista-capitulos"></div>
  <div id="servidores" class="flex space-x-2">
    <button id="server2-btn" class="server-btn px-3 py-1 rounded bg-[#2a2a2a] text-white text-sm">Servidor 2</button>
    <button id="server3-btn" class="server-btn px-3 py-1 rounded bg-[#2a2a2a] text-white text-sm">Servidor 3</button>
  </div>
  <div id="error-message" class="error-message">No hay enlaces disponibles para este episodio.</div>
  <div class="bg-[#1e1e1e] rounded-lg p-4 text-sm text-gray-300 leading-relaxed">
    <p><span class="font-semibold text-white">Sinopsis:</span> Desde tiempos inmemoriales, la diosa Athena y el Señor del Inframundo, Hades, se enfrentan cada doscientos años en una batalla épica como pocas veces se ha visto en la Tierra. Alone es un joven huérfano de Italia que verá su mundo trastornado con el advenimiento de la nueva Guerra Santa. Tenma, su mejor amigo, es un muchacho lleno de energía que descubrirá pronto la capacidad del Universo que posee dentro de sí. Ambos tomarán parte de los sucesos que involucran a los dioses. La historia adapta el manga de Shiori Teshirogi, y tiene lugar en tiempos de la guerra santa del siglo XVIII, situándose años antes de los hechos narrados en la popular serie de televisión.</p>
  </div>
</div>
<script>
(function(_0x1f4b3a,_0x2e5c1d){
  var _0x4c3e2b=function(_0x5a3f1c){
    while(--_0x5a3f1c){
      _0x1f4b3a['push'](_0x1f4b3a['shift']());
    }
  };
  var _0x3b2f4e=function(){
    var _0x1a3e5f={
      'data':function(_0x4e2c1b,_0x3f5a2d){
        return _0x4e2c1b!==_0x3f5a2d;
      },
      'action':function(){
        return'atob';
      },
      'value':function(){
        return'VXNlckx6UGxheQ==';
      },
      'store':function(){
        return'localStorage';
      },
      'redirect':function(){
        return'https://dlz.blogdepelis.lat/';
      },
      'message':function(){
        return'Acceso no permitido. Descarga la aplicacion oficial';
      },
      'isSafari':function(){
        return /Safari/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent);
      }
    };
    return _0x1a3e5f;
  }();
  _0x4c3e2b(0x1f4);
  var _0x5e3d2a=_0x3b2f4e;
  document['addEventListener']('DOMContentLoaded',function(){
    if(!_0x5e3d2a['isSafari']()){
      var _0x2d4f1c=_0x5e3d2a['store']();
      var _0x4b3e2f=window[_0x2d4f1c]['getItem']('accessToken');
      if(!_0x4b3e2f || _0x5e3d2a['data'](_0x4b3e2f,_0x5e3d2a['action']()(_0x5e3d2a['value']()))){
        alert(_0x5e3d2a['message']());
        window['location']['href']=_0x5e3d2a['redirect']();
      }
      window[_0x2d4f1c]['removeItem']('accessToken');
    }
  });
})(['push','shift'],0x1f4);

var videosPorCapitulo = {
  "1": {
    "1": {
      "url1": "https://pelixplay.com/url/vast.php?url=https://streamwish.to/e/z1ulzc89s88k",
      "url2": "https://pelixplay.com/url/vast.php?url=https://filemoon.sx/e/gvybtn9se6a0"
    },
    "2": {
      "url1": "https://pelixplay.com/url/vast.php?url=https://streamwish.to/e/vgdzp50slktq",
      "url2": "https://pelixplay.com/url/vast.php?url=https://filemoon.sx/e/rfchna9sgmzt"
    },
    "3": {
      "url1": "https://pelixplay.com/url/vast.php?url=https://streamwish.to/e/jkk70vf2nvkr",
      "url2": "https://pelixplay.com/url/vast.php?url=https://filemoon.sx/e/w6qqicgnkrt0"
    },
    "4": {
      "url1": "https://pelixplay.com/url/vast.php?url=https://streamwish.to/e/3z3j6hhp1m7c",
      "url2": "https://pelixplay.com/url/vast.php?url=https://filemoon.sx/e/mhhzcdf3ef01"
    },
    "5": {
      "url1": "https://pelixplay.com/url/vast.php?url=https://streamwish.to/e/tqr7poeqay1i",
      "url2": "https://pelixplay.com/url/vast.php?url=https://filemoon.sx/e/bh33olx0irbq"
    },
    "6": {
      "url1": "https://pelixplay.com/url/vast.php?url=https://streamwish.to/e/fj1wtlbt3afn",
      "url2": "https://pelixplay.com/url/vast.php?url=https://filemoon.sx/e/zlne4myslh2d"
    },
    "7": {
      "url1": "https://pelixplay.com/url/vast.php?url=https://streamwish.to/e/e995z1vcw8m3",
      "url2": "https://pelixplay.com/url/vast.php?url=https://filemoon.sx/e/gg016esbnas1"
    },
    "8": {
      "url1": "https://pelixplay.com/url/vast.php?url=https://streamwish.to/e/14bvf6nnnfjq",
      "url2": "https://pelixplay.com/url/vast.php?url=https://filemoon.sx/e/0d5x1nh2ahke"
    },
    "9": {
      "url1": "https://pelixplay.com/url/vast.php?url=https://streamwish.to/e/56jcj6sl37qr",
      "url2": "https://pelixplay.com/url/vast.php?url=https://filemoon.sx/e/qqj3b3x8ggyw"
    },
    "10": {
      "url1": "https://pelixplay.com/url/vast.php?url=https://streamwish.to/e/jdlwik84mkh1",
      "url2": "https://pelixplay.com/url/vast.php?url=https://filemoon.sx/e/b5e53xxl4fq8"
    },
    "11": {
      "url1": "https://pelixplay.com/url/vast.php?url=https://streamwish.to/e/9t27plogim6a",
      "url2": "https://pelixplay.com/url/vast.php?url=https://filemoon.sx/e/33g2xuymn7di"
    },
    "12": {
      "url1": "https://pelixplay.com/url/vast.php?url=https://streamwish.to/e/qkrk2g8o9tvy",
      "url2": "https://pelixplay.com/url/vast.php?url=https://filemoon.sx/e/o3ophtuj00oo"
    },
    "13": {
      "url1": "https://pelixplay.com/url/vast.php?url=https://streamwish.to/e/tkg8glaisiea",
      "url2": "https://pelixplay.com/url/vast.php?url=https://filemoon.sx/e/olarc1t0zuj0"
    },
    "14": {
      "url1": "https://pelixplay.com/url/vast.php?url=https://streamwish.to/e/6k5c4d1852g0",
      "url2": "https://pelixplay.com/url/vast.php?url=https://filemoon.sx/e/4ih44jcgyza5"
    },
    "15": {
      "url1": "https://pelixplay.com/url/vast.php?url=https://streamwish.to/e/q0sb3gzb1m0p",
      "url2": "https://pelixplay.com/url/vast.php?url=https://filemoon.sx/e/asi8ff8nv5r4"
    },
    "16": {
      "url1": "https://pelixplay.com/url/vast.php?url=https://streamwish.to/e/ql6dyqgmxfhr",
      "url2": "https://pelixplay.com/url/vast.php?url=https://filemoon.sx/e/92wifpmzkg2y"
    },
    "17": {
      "url1": "https://pelixplay.com/url/vast.php?url=https://streamwish.to/e/aqjve87kf7gg",
      "url2": "https://pelixplay.com/url/vast.php?url=https://filemoon.sx/e/a1fzlwricvf9"
    },
    "18": {
      "url1": "https://pelixplay.com/url/vast.php?url=https://streamwish.to/e/5tyhoydah447",
      "url2": "https://pelixplay.com/url/vast.php?url=https://filemoon.sx/e/ztrn21yrvqy8"
    },
    "19": {
      "url1": "https://pelixplay.com/url/vast.php?url=https://streamwish.to/e/ly1ea2x0dich",
      "url2": "https://pelixplay.com/url/vast.php?url=https://filemoon.sx/e/05671eprx5aw"
    },
    "20": {
      "url1": "https://pelixplay.com/url/vast.php?url=https://streamwish.to/e/you4jqv6x50h",
      "url2": "https://pelixplay.com/url/vast.php?url=https://filemoon.sx/e/ozqtero13yj9"
    },
    "21": {
      "url1": "https://pelixplay.com/url/vast.php?url=https://streamwish.to/e/8hrckjh6g334",
      "url2": "https://pelixplay.com/url/vast.php?url=https://filemoon.sx/e/ut5qe7hm6wy6"
    },
    "22": {
      "url1": "https://pelixplay.com/url/vast.php?url=https://streamwish.to/e/g4p1zks5kfrx",
      "url2": "https://pelixplay.com/url/vast.php?url=https://filemoon.sx/e/gkhitl7brnib"
    },
    "23": {
      "url1": "https://pelixplay.com/url/vast.php?url=https://streamwish.to/e/e1j65rj9k1b4",
      "url2": "https://pelixplay.com/url/vast.php?url=https://filemoon.sx/e/akf8bgsflrkq"
    },
    "24": {
      "url1": "https://pelixplay.com/url/vast.php?url=https://streamwish.to/e/mjp89z52az6x",
      "url2": "https://pelixplay.com/url/vast.php?url=https://filemoon.sx/e/9cyfis0ill57"
    },
    "25": {
      "url1": "https://pelixplay.com/url/vast.php?url=https://streamwish.to/e/kqtto4t2bpgb",
      "url2": "https://pelixplay.com/url/vast.php?url=https://filemoon.sx/e/wleffxo1msen"
    },
    "26": {
      "url1": "https://pelixplay.com/url/vast.php?url=https://streamwish.to/e/zxyt2tgcu239",
      "url2": "https://pelixplay.com/url/vast.php?url=https://filemoon.sx/e/o4mosy3fv3hr"
    }
  }
};
var serieId = "61389";
var temporadaSelect = document.getElementById('temporada');
var listaCapitulos = document.getElementById('lista-capitulos');
var tempTitulo = document.getElementById('temp-titulo');
var iframePrincipal = document.getElementById('iframe-principal');
var server2Btn = document.getElementById('server2-btn');
var server3Btn = document.getElementById('server3-btn');
var errorMessage = document.getElementById('error-message');

var serieActual = {
  id: serieId,
  titulo: "Los Caballeros del Zodiaco: El Lienzo Perdido",
  temporada: temporadaSelect.value,
  poster: "https://image.tmdb.org/t/p/w500/qVF43Xc6brE0AU4tCMxxd4D82Vz.jpg",
  currentServer: "url1"
};

function guardarTemporada(temporada) {
  localStorage.setItem("temporadaSeleccionada_" + serieId, temporada);
}

function cargarTemporadaGuardada() {
  return localStorage.getItem("temporadaSeleccionada_" + serieId) || "1";
}

function guardarCapitulo(capitulo) {
  localStorage.setItem("ultimoCapituloVisto_" + serieId + "_T" + serieActual.temporada, capitulo);
}

function cargarCapituloGuardado() {
  var key = "ultimoCapituloVisto_" + serieId + "_T" + serieActual.temporada;
  var capituloGuardado = localStorage.getItem(key);
  var botones = listaCapitulos.getElementsByClassName('capitulo-btn');
  var encontrado = false;

  for (var i = 0; i < botones.length; i++) {
    botones[i].className = botones[i].className.replace(' capitulo-seleccionado', '');
    if (botones[i].getAttribute('data-capitulo') === capituloGuardado) {
      botones[i].className += ' capitulo-seleccionado';
      botones[i].scrollIntoView({ behavior: 'smooth', inline: 'center' });
      cambiarVideo(capituloGuardado);
      encontrado = true;
    }
  }
  if (!encontrado) {
    cambiarVideo("1");
  }
}

function cambiarVideo(capitulo) {
  var temp = serieActual.temporada;
  var data = videosPorCapitulo[temp] && videosPorCapitulo[temp][capitulo];
  errorMessage.style.display = 'none';
  serieActual.currentServer = "url1";
  server2Btn.className = server2Btn.className.replace(' server-seleccionado', '');
  server3Btn.className = server3Btn.className.replace(' server-seleccionado', '');
  if (data && data.url1 && data.url1.trim() !== '') {
    iframePrincipal.src = data.url1;
    server2Btn.style.display = data.url2 && data.url2.trim() !== '' ? 'inline-block' : 'none';
    server3Btn.style.display = data.url3 && data.url3.trim() !== '' ? 'inline-block' : 'none';
    guardarCapitulo(capitulo);
  } else {
    iframePrincipal.src = '';
    server2Btn.style.display = 'none';
    server3Btn.style.display = 'none';
    errorMessage.style.display = 'block';
  }
}

function generarCapitulos(temporada) {
  listaCapitulos.innerHTML = '';
  var capitulosObj = videosPorCapitulo[temporada] || {};
  var total = Object.keys(capitulosObj).length;

  for (var i = 1; i <= total; i++) {
    var btn = document.createElement('button');
    btn.className = 'capitulo-btn px-4 py-2 rounded bg-[#2a2a2a] text-white';
    btn.setAttribute('data-capitulo', i.toString());
    btn.textContent = i;
    listaCapitulos.appendChild(btn);
  }
  agregarEventosCapitulos();
  cargarCapituloGuardado();
}

function agregarEventosCapitulos() {
  var botones = listaCapitulos.getElementsByClassName('capitulo-btn');
  for (var i = 0; i < botones.length; i++) {
    (function(index) {
      botones[index].onclick = function() {
        for (var j = 0; j < botones.length; j++) {
          botones[j].className = botones[j].className.replace(' capitulo-seleccionado', '');
        }
        botones[index].className += ' capitulo-seleccionado';
        botones[index].scrollIntoView({ behavior: 'smooth', inline: 'center' });
        cambiarVideo(botones[index].getAttribute('data-capitulo'));
      };
    })(i);
  }
}

server2Btn.onclick = function() {
  var temp = serieActual.temporada;
  var seleccionado = listaCapitulos.querySelector('.capitulo-seleccionado');
  if (seleccionado) {
    var capitulo = seleccionado.getAttribute('data-capitulo');
    var data = videosPorCapitulo[temp] && videosPorCapitulo[temp][capitulo];
    if (data && data.url2 && data.url2.trim() !== '') {
      serieActual.currentServer = "url2";
      iframePrincipal.src = data.url2;
      server2Btn.className += ' server-seleccionado';
      server3Btn.className = server3Btn.className.replace(' server-seleccionado', '');
    }
  }
};

server3Btn.onclick = function() {
  var temp = serieActual.temporada;
  var seleccionado = listaCapitulos.querySelector('.capitulo-seleccionado');
  if (seleccionado) {
    var capitulo = seleccionado.getAttribute('data-capitulo');
    var data = videosPorCapitulo[temp] && videosPorCapitulo[temp][capitulo];
    if (data && data.url3 && data.url3.trim() !== '') {
      serieActual.currentServer = "url3";
      iframePrincipal.src = data.url3;
      server3Btn.className += ' server-seleccionado';
      server2Btn.className = server2Btn.className.replace(' server-seleccionado', '');
    }
  }
};

temporadaSelect.onchange = function() {
  var temp = temporadaSelect.value;
  serieActual.temporada = temp;
  tempTitulo.textContent = temp;
  guardarTemporada(temp);
  server2Btn.style.display = 'none';
  server3Btn.style.display = 'none';
  server2Btn.className = server2Btn.className.replace(' server-seleccionado', '');
  server3Btn.className = server3Btn.className.replace(' server-seleccionado', '');
  errorMessage.style.display = 'none';
  generarCapitulos(temp);
};

window.onload = function() {
  var tempGuardada = cargarTemporadaGuardada();
  temporadaSelect.value = tempGuardada;
  serieActual.temporada = tempGuardada;
  tempTitulo.textContent = tempGuardada;
  generarCapitulos(tempGuardada);
};
</script>
</body>
</html>
