<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
  <title>The Thing Behind the Door</title>
  <link href="https://fonts.googleapis.com/css2?family=Netflix+Sans:wght@400;500;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    *{margin:0;padding:0;box-sizing:border-box;}
    body{background:#000;color:#fff;font-family:'Netflix Sans',sans-serif;overflow-x:hidden;line-height:1.5;}
    .backdrop{position:fixed;top:0;left:0;right:0;bottom:0;
      background:linear-gradient(to bottom,rgba(0,0,0,0.7),rgba(0,0,0,0.9)),url('https://image.tmdb.org/t/p/original/7FTOVQO3pndOuswVS3iNt3odVq5.jpg') center/cover no-repeat;
      filter:blur(8px) brightness(0.6);z-index:-1;transform:scale(1.1);}
    .container{max-width:480px;margin:0 auto;padding:0 16px;}
    .header{padding-top:60px;text-align:center;}
    .poster{width:160px;height:240px;border-radius:8px;overflow:hidden;margin:0 auto 16px;
      box-shadow:0 8px 24px rgba(0,0,0,0.6);border:1px solid rgba(255,255,255,0.1);}
    .poster img{width:100%;height:100%;object-fit:cover;}
    .title{font-size:28px;font-weight:900;margin-bottom:8px;text-shadow:0 2px 4px rgba(0,0,0,0.8);}
    .meta{font-size:14px;color:#aaa;margin-bottom:16px;}
    .meta span{margin-right:12px;}
    .match{color:#46d369;font-weight:700;}
    .actions{display:flex;justify-content:center;gap:16px;margin:24px 0;}
    .btn{display:flex;flex-direction:column;align-items:center;gap:6px;
      background:none;border:none;color:#fff;font-size:12px;font-weight:500;cursor:pointer;transition:transform .2s;}
    .btn:active{transform:scale(0.92);}
    .btn-icon{width:52px;height:52px;border-radius:50%;background:rgba(255,255,255,0.15);
      display:flex;align-items:center;justify-content:center;font-size:20px;transition:all .2s;}
    .btn-play .btn-icon{background:#fff;color:#000;font-size:24px;}
    .btn:hover .btn-icon{background:rgba(255,255,255,0.3);}
    .btn-play:hover .btn-icon{background:#e6e6e6;}
    .btn-download{margin-top:16px;background:rgba(255,255,255,0.1);border:1px solid rgba(255,255,255,0.3);
      color:#fff;padding:12px 24px;border-radius:4px;font-weight:600;width:100%;font-size:15px;
      display:flex;align-items:center;justify-content:center;gap:8px;transition:all .2s;}
    .btn-download:active{background:rgba(255,255,255,0.2);transform:scale(0.98);}
    .synopsis{font-size:15px;color:#ccc;line-height:1.6;margin:24px 0;}
    .synopsis-title{color:#fff;font-weight:700;margin-bottom:8px;font-size:16px;}
    .btn-cast{position:fixed;top:18px;right:18px;background:rgba(255,255,255,0.12);
      border:1px solid rgba(255,255,255,0.25);color:#fff;width:46px;height:46px;border-radius:50%;
      display:flex;align-items:center;justify-content:center;font-size:22px;cursor:pointer;
      z-index:10000;backdrop-filter:blur(8px);transition:all 0.25s;}
    .btn-cast:hover{background:rgba(255,255,255,0.3);transform:scale(1.1);}
    .modal-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.85);backdrop-filter:blur(8px);
      justify-content:center;align-items:center;z-index:9999;opacity:0;transition:opacity .3s;}
    .modal-overlay.active{display:flex;opacity:1;}
    .modal-card{background:#111;padding:24px;border-radius:14px;max-width:480px;width:90%;position:relative;
      color:#eee;animation:fadeInUp .3s;}
    .close-btn{position:absolute;top:12px;right:12px;background:none;border:none;color:#fff;font-size:20px;cursor:pointer;}
    .close-btn:hover{transform:scale(1.2);color:#ffd700;}
    .info-grid{display:grid;grid-template-columns:1fr;gap:8px;margin-top:28px;}
    .info-grid p{margin:0;font-size:15px;line-height:1.5;}
    @keyframes fadeInUp{from{transform:translateY(25px);opacity:0;}to{transform:translateY(0);opacity:1;}}
    @media(max-width:380px){.title{font-size:24px;}.poster{width:140px;height:210px;}}
  </style>
</head>
<body>
  <button id="btnCast" class="btn-cast" title="Transmitir"><i class="fas fa-tv"></i></button>
  <div class="backdrop"></div>
  <div class="container">
    <div class="header">
      <div class="poster"><img src="https://image.tmdb.org/t/p/w500/lGlYPD5AVINwSbTroS3mOltp2nk.jpg" alt="The Thing Behind the Door"></div>
      <h1 class="title">The Thing Behind the Door</h1>
      <div class="meta">
        <span>Año: 2023</span>
        <span class="match">57% para ti</span>
        <span>81 min</span>
      </div>
    </div>
    <div class="actions">
      <button class="btn btn-play" id="btnReproducir"><div class="btn-icon"><i class="fas fa-play"></i></div><span>Reproducir</span></button>
      <button class="btn" id="btnLista"><div class="btn-icon"><i class="fas fa-plus"></i></div><span>Mi lista</span></button>
      <button class="btn" id="btnInfo"><div class="btn-icon"><i class="fas fa-info"></i></div><span>Info</span></button>
    </div>
    <button class="btn-download" id="download-btn"><i class="fas fa-download"></i> Descargar</button>
    <div class="synopsis">
      <div class="synopsis-title">Sinopsis</div>
      <p id="synopsisText">Una joven, Adèle, está literalmente atormentada por la muerte de su marido, Jean, asesinado en una trinchera durante la Primera Guerra Mundial. Desesperada e incapaz de afrontar esta trágica pérdida, Adèle recurre a la magia negra con la esperanza de recuperar a su amante.</p>
      <button id="toggleSynopsis" style="display:none;background:none;border:none;color:#46d369;font-weight:700;cursor:pointer;margin-top:8px;">Ver más</button>
    </div>
  </div>

  <!-- MODAL INFO -->
  <div id="infoModal" class="modal-overlay">
    <div class="modal-card">
      <button id="closeModal" class="close-btn"><i class="fas fa-times"></i></button>
      <div class="info-grid">
        <p><strong>Director:</strong> Desconocido</p>
        <p><strong>Género:</strong> Terror</p>
        <p><strong>País:</strong> France</p>
        <p><strong>Título Original:</strong> La Chose derrière la porte</p>
        <p><strong>Eslogan:</strong> N/A</p>
        <p><strong>Presupuesto:</strong> Desconocido</p>
        <p><strong>Ingresos:</strong> N/A</p>
        <p><strong>Calificación:</strong> 5.7 / 10</p>
        <p><strong>Duración:</strong> 81 min</p>
      </div>
    </div>
  </div>

  <!-- Video Modal -->
  <div id="videoModal" class="modal-overlay">
    <div class="modal-card">
      <button id="closeVideoModal" class="close-btn"><i class="fas fa-times"></i></button>
      <div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;">
        <iframe id="videoFrameModal" src="" allowfullscreen style="position:absolute;top:0;left:0;width:100%;height:100%;border:none;"></iframe>
      </div>
    </div>
  </div>

  <script>
    window.addEventListener('load', () => setTimeout(() => {
      const VIDEO_URL = "https://lzrdrz10.github.io/repro/player.html?video=aHR0cHM6Ly8xYS0xNzkxLmNvbS92aWRlby9md2UyLzIyL3M4LzIvZy9KL1ovbC9nSlpsei5hYWEubXA0&poster=aHR0cHM6Ly9pbWFnZS50bWRiLm9yZy90L3Avb3JpZ2luYWwvN0ZUT1ZRTzNwbmRPdXN3VlMzaU50M29kVnE1LmpwZw==&title=RWwgcmV0b3JubyBkZSBsb3MgbXVlcnRvcyB2aXZpZW50ZXM=";
      const DOWNLOAD_CAST_URL = "https://1a-1791.com/video/fwe2/22/s8/2/g/J/Z/l/gJZlz.aaa.mp4";
      const btnReproducir = document.getElementById('btnReproducir');
      const videoModal = document.getElementById('videoModal');
      const videoFrameModal = document.getElementById('videoFrameModal');
      const closeVideoModal = document.getElementById('closeVideoModal');
      const downloadBtn = document.getElementById('download-btn');
      const castBtn = document.getElementById('btnCast');
      const btnLista = document.getElementById('btnLista');
      const btnInfo = document.getElementById('btnInfo');
      const synopsisText = document.getElementById('synopsisText');
      const toggleSynopsis = document.getElementById('toggleSynopsis');
      const infoModal = document.getElementById('infoModal');
      const closeModal = document.getElementById('closeModal');
      const maxLength = 200;

      // === REPRODUCIR (iframeUrl) ===
      btnReproducir.onclick = () => {
        videoFrameModal.src = VIDEO_URL;
        videoModal.classList.add('active');
        document.body.style.overflow = 'hidden';
      };
      const closeVideo = () => {
        videoModal.classList.remove('active');
        videoFrameModal.src = '';
        document.body.style.overflow = '';
      };
      closeVideoModal.onclick = closeVideo;
      videoModal.onclick = e => e.target === videoModal && closeVideo();

      // === DESCARGAR (mismo enlace que Cast) ===
      downloadBtn.onclick = e => {
        e.preventDefault();
        const clean = DOWNLOAD_CAST_URL.replace(/^https?:\/\//, '');
        const intentPlus = 'intent://' + clean + '#Intent;package=idm.internet.download.manager.plus;scheme=https;end';
        const intentNormal = 'intent://' + clean + '#Intent;package=idm.internet.download.manager;scheme=https;end';
        location.href = intentPlus;
        setTimeout(() => location.href = intentNormal, 1000);
      };

      // === CAST (mismo enlace que Descargar) ===
      castBtn.onclick = () => {
        const clean = DOWNLOAD_CAST_URL.replace(/^https?:\/\//, '');
        const castIntent = 'intent://' + clean + '#Intent;package=com.instantbits.cast.webvideo;scheme=https;end';
        open(castIntent, '_blank');
      };

      // === MI LISTA ===
      btnLista.onclick = () => {
        let lista = JSON.parse(localStorage.getItem('miLista') || '[]');
        const pageUrl = location.href;
        const exists = lista.some(m => m.pageUrl === pageUrl);
        const icon = btnLista.querySelector('i');
        const text = btnLista.querySelector('span');
        if (!exists) {
          lista.push({titulo: "The Thing Behind the Door", year: "2023", poster: "https://image.tmdb.org/t/p/w500/lGlYPD5AVINwSbTroS3mOltp2nk.jpg", pageUrl, addedAt: new Date().toISOString()});
          localStorage.setItem('miLista', JSON.stringify(lista));
          icon.classList.replace('fa-plus', 'fa-check');
          text.textContent = 'Añadido';
        } else {
          lista = lista.filter(m => m.pageUrl !== pageUrl);
          localStorage.setItem('miLista', JSON.stringify(lista));
          icon.classList.replace('fa-check', 'fa-plus');
          text.textContent = 'Mi lista';
        }
      };
      if (JSON.parse(localStorage.getItem('miLista') || '[]').some(m => m.pageUrl === location.href)) {
        btnLista.querySelector('i').classList.replace('fa-plus', 'fa-check');
        btnLista.querySelector('span').textContent = 'Añadido';
      }

      // === SINOPSIS VER MÁS ===
      if (synopsisText.textContent.length > maxLength) {
        const full = synopsisText.textContent.trim();
        const short = full.slice(0, maxLength) + '...';
        synopsisText.textContent = short;
        toggleSynopsis.style.display = 'inline-block';
        let expanded = false;
        toggleSynopsis.onclick = () => {
          synopsisText.textContent = expanded ? short : full;
          toggleSynopsis.textContent = expanded ? 'Ver más' : 'Ver menos';
          expanded = !expanded;
        };
      }

      // === MODAL INFO ===
      btnInfo.onclick = () => { infoModal.classList.add('active'); document.body.style.overflow = 'hidden'; };
      closeModal.onclick = () => { infoModal.classList.remove('active'); document.body.style.overflow = ''; };
      infoModal.onclick = e => e.target === infoModal && (infoModal.classList.remove('active'), document.body.style.overflow = '');
    }, 100));
  </script>
</body>
</html>
